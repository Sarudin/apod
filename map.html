<!DOCTYPE html>
<html>
<head>
	<title>Heat Map | APOD</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="DC.Title" content="APOD Heat Map" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0, user-scalable=yes" />
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
	<link rel="stylesheet" href="media/style.css" type="text/css">
	<script type="text/javascript" src="media/jquery-1.10.0.min.js"></script>
	<script type="text/javascript" src="media/raphael-min.js"></script>
	<script type="text/javascript" src="media/virtualsky.min.js"></script>
	<script>
	<!--
	
		var grid = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,3,0,0,0,0,0,1,6,0,21,0,0,0,0,1,0,0,0,4,27,0,0,0,7,0,1,0,4,0,0,0,0,0,0,0,0,0,1,0,0,0,2,1,78,0,1,1,0,0,0,5,0,0,0,0,0,0,0,1,0,0,4,0,0,0,0,0,0,0,0,0,0,15,1,48,0,0,0,2,2,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,4,0,0,0,12,52,1,0,1,2,8,7,0,1,3,0,3,0,0,5,23,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,10,0,12,5,0,0,0,0,0,0,0,0,5,1,0,5,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,9,11,9,0,0,0,15,3,1,0,0,0,0,0,0,0,0,1,0,0,0,2,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,3,5,8,1,0,2,0,0,2,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,13,4,2,2,3,0,0,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,0,0,0,70,0,0,0,19,0,0,1,0,0,0,2,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,0,0,3,47,23,9,4,2,3,0,0,0,0,0,1,0,0,0,0,1,0,1,0,0,0,0,11,7,6,0,1,0,0,5,0,2,0,0,0,0,0,0,0,0,0,0,0,2,0,0,2,0,0,0,0,3,29,3,9,0,0,3,0,119,0,0,0,0,0,0,0,0,0,0,4,0,1,27,10,1,0,0,2,0,0,0,0,17,0,0,0,0,0,0,0,0,0,2,2,0,0,2,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,6,0,1,5,12,0,0,0,0,4,2,2,0,4,27,0,3,0,0,0,0,22,0,0,0,1,39,0,0,2,0,0,51,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,30,2,0,0,0,0,0,0,0,3,0,1,4,0,0,0,3,0,0,0,0,2,25,21,2,0,0,1,8,0,0,0,2,0,54,0,0,0,7,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,7,0,0,0,0,1,0,0,0,0,0,10,1,3,18,15,0,0,1,2,0,0,0,1,0,0,2,6,0,1,0,0,4,0,0,4,0,0,0,2,3,0,0,0,7,0,0,0,0,0,0,3,5,7,0,1,1,0,0,0,0,0,0,1,1,32,8,0,0,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,0,14,1,0,1,0,0,1,0,34,0,3,0,0,0,0,0,12,6,0,2,24,0,47,0,0,0,0,73,0,0,0,2,0,1,0,0,0,2,0,0,1,6,5,0,2,1,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,2,2,12,1,0,0,0,5,3,4,1,0,0,15,2,0,0,0,0,0,1,0,0,0,0,1,13,0,0,1,0,0,2,0,3,12,0,0,4,0,3,0,2,0,0,0,0,9,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,9,81,3,0,30,18,14,0,8,6,1,0,2,0,0,0,3,1,0,1,1,0,0,3,3,0,0,0,0,0,0,0,0,5,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,3,0,0,0,8,0,0,0,0,3,0,0,0,0,0,0,0,0,2,0,0,0,0,0,5,4,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,46,4,0,9,77,0,0,0,0,1,0,0,8,0,0,0,2,0,1,1,0,0,0,0,12,0,0,0,0,0,0,0,0,2,0,2,0,1,0,0,0,1,3,0,1,0,0,2,1,4,0,0,0,0,0,5,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,52,0,29,0,0,1,0,0,0,0,1,4,0,0,3,6,2,0,0,1,2,0,0,2,0,0,0,1,0,0,0,0,0,0,2,0,0,2,0,0,0,2,0,0,1,0,0,0,1,0,0,2,5,0,0,0,0,0,2,1,0,3,0,1,0,0,0,0,0,0,15,0,0,0,66,20,1,1,0,0,2,0,0,12,4,8,0,0,0,0,0,14,0,0,1,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,2,2,0,0,0,0,0,0,3,0,0,6,0,0,0,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,0,109,33,0,0,0,0,1,0,0,0,0,0,2,1,0,0,0,0,1,0,4,0,0,0,0,4,3,0,0,10,0,0,0,4,72,0,0,12,0,2,1,0,0,0,0,0,0,0,3,0,1,31,0,0,2,0,0,0,0,0,1,1,0,0,0,20,7,29,0,0,3,0,10,0,0,0,2,0,0,0,0,0,0,1,0,0,3,6,0,0,0,0,0,0,0,0,0,0,4,1,0,0,1,1,0,34,29,5,0,4,0,1,4,0,0,0,1,0,0,0,2,0,0,1,20,0,0,0,0,5,0,0,0,0,0,0,0,11,0,0,6,0,0,0,0,0,0,0,0,0,2,6,0,0,0,0,0,0,0,1,0,0,0,0,0,37,0,1,0,1,0,0,0,0,0,0,0,11,175,0,34,0,0,21,3,3,1,0,1,0,0,0,0,3,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,7,0,0,0,0,0,0,0,0,5,0,1,0,0,0,0,0,0,2,1,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,4,7,2,4,12,32,0,3,0,0,0,0,0,4,14,0,0,0,0,0,0,0,1,15,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,6,0,0,0,0,0,2,0,13,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,4,0,10,3,4,19,13,0,0,0,0,1,0,0,0,0,0,0,5,0,0,0,0,0,0,4,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,8,0,1,1,7,0,0,0,1,0,0,6,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,6,0,0,0,0,16,0,0,0,0,0,0,1,0,0,0,0,0,0,2,0,0,1,0,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0,0,0,4,0,0,0,1,18,0,0,0,0,0,0,0,4,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,6,0,1,0,0,10,0,0,0,0,11,0,4,0,0,34,0,5,0,0,0,0,0,0,1,7,0,0,2,0,1,0,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,8,6,0,0,0,1,0,0,0,0,19,10,0,0,0,0,0,0,0,2,0,0,7,7,4,1,0,0,7,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,3,0,0,0,0,0,5,0,0,0,0,0,1,0,0,5,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1,6,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,2,64,15,1,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,17,0,0,2,0,5,7,0,0,14,22,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,2,0,0,2,1,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,7,82,15,6,0,0,0,0,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,6,5,23,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];

		$(document).ready(function(){
		
			updateMap();
	
			$(window).bind('resize',function(e){ updateMap(); });
	
			$('#heatmap').css({'cursor':'pointer'});

			planetarium = $.virtualsky({id:'sky','projection':'planechart','showgalaxy':true,'meridian':true,'showposition':false,'showdate':false,'credit':false,'ecliptic':true,'showplanetlabels':false,'showplanets':false,'constellations':true,'keyboard':false});
			$('#heatmap').on('mousemove mouseenter mouseover',function(e){
				planetarium.canvas.trigger(e,{sky:planetarium});
			});
		});
	
		function updateMap(){

			reso = 5;	// The resolution in degrees of sky

			wide = $(window).width();
			tall = wide/2;
			if(wide >= $(window).width()){
				wide = $(window).width();
				tall = wide/2;
			}
			if(tall >= $(window).height()){
				tall = $(window).height();
				wide = 2*tall;
			}
	
			$('#heatmap,#sky').css({'width':Math.round(wide),'height':Math.round(tall),'margin':'auto','top':($(window).height()-tall)/2});
			$('#heatmap').css({'left':Math.round(($(window).width()-wide)/2)})
	
			nx = Math.round(360/reso);
			ny = Math.round(180/reso);

			max = Math.max.apply(null,grid)

			if(typeof paper!=="undefined") paper.remove();
			paper = Raphael("heatmap", wide, tall);
			
			dx = wide/nx;
			dy = tall/ny;
			for(i = 0;i<grid.length; i++){
				col = (i % nx);
				row = Math.floor((i - col)/nx);
				x = wide*col/nx;
				y = tall*row/ny;
				scale = Math.pow(Math.sin(0.5*Math.PI*grid[i]/max),0.3);
				if(grid[i] > 0) paper.rect(x, y, dx, dy).attr({
					fill:"red",
					'stroke-width':0,
					'fill-opacity':scale
				}).data('x',col).data('y',row).click(function(e){
					var dc = 90-Math.floor(180*this.data('y')/ny);
					var ra = 360-Math.floor(360*this.data('x')/nx); // RA goes in the opposite sense on the sky
					ra -= reso/2;	// Move to centre of gridded box
					dc -= reso/2;
					self.parent.location.href = 'coord/'+(ra)+(dc>=0 ? '+':'')+dc+'.html';
				});
			}
		}

	// -->	
	</script>
	<style>
	html,body { height: 100%; }
	body { width: 100%; height: 100%; margin: 0px; padding: 0px; }
	#sky, #heatmap, #holder { width: 100%; height: 100%; }
	#sky, #heatmap {
		position: absolute;
		top: 0px;
	}
	#heatmap { overflow: hidden; }
	#holder { position: relative; width: 100%; height: 100%; margin: auto; background-color: black; }
	</style>
</head>
<body>

<div id="holder">
	<div id="sky"></div>
	<div id="heatmap"></div>
</div>


</body>
</html>
